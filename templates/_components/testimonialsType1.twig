{% from "_macros/elements" import star %}

{% set heading = entry.testimonialsType1Heading ?? false %}
{% set description = entry.testimonialsType1Description ?? false %}
{% set testimonials = entry.testimonials|length ? entry.testimonials : false %}

<section class="testimonialsType1" data-section-id="testimonials" data-bg="dark">
    <div class="container">
        <div class="inner">
            <div class="top-text" data-sal="slide-up" data-sal-duration="1200">
                {% if heading %}
                    <h2>{{heading}}</h2>
                {% endif %}
                {% if description %}
                <p>{{description|nl2br}}</p>
                {% endif %}
            </div>

            {% if testimonials|length > 0 %}
                <div class="testimonials-grid" data-sal="slide-up" data-sal-duration="1200">
                    {% for testimonial in testimonials %}
                        {% set heading = testimonial.heading ?? false %}
                        {% set description = testimonial.description ?? false %}
                        {% set name = testimonial.clientName ?? false %}
                        {% set rating = testimonial.rating ?? 0 %}
                        <div class="testimonial" >
                            {% if rating > 0 %}
                                <div class="star-ratings">
                                    {% for i in range(1, rating) %}
                                        {{ star() }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                            {% if heading %}
                                <h4>{{heading}}</h4>
                            {% endif %}
                            {% if name %}
                                <div class="client-name">{{name}}</div>
                            {% endif %}
                            {% if description %}
                                <p>{{description|nl2br}}</p>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            
        </div>
    </div>
</section>